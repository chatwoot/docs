---
sidebar_label: "Identity Validation"
title: "Identity validation in Chatwoot"
---

Identity validation is an important security feature that helps ensure that conversations between customers and support agents are private and secure. By verifying the identities of both parties, identity validation helps prevent impersonation and unauthorized access.

One way to implement identity validation is by using HMAC, which stands for Hash-based Message Authentication Code. HMAC is a cryptographic algorithm that uses a secret key to generate a message authentication code (MAC) for a given message. The MAC can then be used to verify the authenticity and integrity of the message.

To use HMAC for identity validation in your web widget, you'll need to generate an HMAC using a secret key specific to your widget. Here are code snippets in different languages that you can use to generate an HMAC for identity validation.

## Generate HMAC

### PHP

```php
<?php

// Define your key and message
$key = 'your_web_widget_hmac_token';
$message = 'some_identifier';

// Generate the HMAC
$identifier_hash = hash_hmac('sha256', $message, $key);
?>

```

### Javascript (Node.js)

```js
const crypto = require("crypto");

// Define your key and message
const key = "your_web_widget_hmac_token";
const message = "some_identifier";

// Generate the HMAC
const identifierHash = crypto
  .createHmac("sha256", key)
  .update(message)
  .digest("hex");
```

### Ruby

```ruby
require 'openssl'

# Define your key and message
key = 'your_web_widget_hmac_token'
message = 'some_identifier'

# Generate the HMAC
identifier_hash = OpenSSL::HMAC.hexdigest('sha256', key, message)
```

### Elixir

```elixir
# Define your key and message
key = 'your_web_widget_hmac_token'
message = 'some_identifier'

# Generate the HMAC
signature = :crypto.hmac(:sha256, key, message)

identifier_hash = Base.encode16(signature, case: :lower)
```

### Golang

```go
package main

import (
	"crypto/hmac"
	"crypto/sha256"
	"encoding/hex"
	"fmt"
)

func main() {
	// Define your key and message
	key := []byte("your_web_widget_hmac_token")
	message := []byte("some_identifier")

	// Generate the HMAC
	hash := hmac.New(sha256.New, key)
	hash.Write(message)
	identifierHash := hex.EncodeToString(hash.Sum(nil))

	// Print the HMAC
	fmt.Println(identifierHash)
}

```

### Python

```py
import hashlib
import hmac

# Define your key and message
secret = bytes('your_web_widget_hmac_token', 'utf-8')
message = bytes('some_identifier', 'utf-8')

# Generate the HMAC
hash = hmac.new(secret, message, hashlib.sha256)
identifier_hash = hash.hexdigest()
```

## Using HMAC for Identity Validation

Once you've generated an HMAC for an identifier using the code snippets above, you can use the HMAC to validate the identity of the sender. To do this, send the HMAC along with the identifier to your server, where you can verify the HMAC against the HMAC generated by the web widget using the same secret key.

If the HMACs match, you can be confident that the person who sent the identifier is authorized to do so. If the HMACs do not match, you should reject the identifier and take appropriate action to protect the security of your system. This may include logging the incident, notifying an administrator, or temporarily locking the account in question. By implementing HMAC-based identity validation, you can help ensure the privacy and security of your users' conversations.

## Sending the HMAC using the SDK

Once you have the SDK setup on your website or app, you can proceed to identify the user with the following

```js
window.$chatwoot.setUser(`<unique-identifier-key-of-the-user>`, {
  name: "", // Name of the user
  email: "", // Email of the user
  identifier_hash: "<identifier-hash>" // Identifier Hash generated in the previous step
}
```
